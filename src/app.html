<!doctype html>
<html lang="th">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!-- Removed external Google Fonts to satisfy strict CSP (style-src 'self'). -->
		<!-- Self-hosted Sarabun @font-face declared in app.css (place WOFF2 files under /fonts). -->
		<!-- If fonts not yet downloaded, browser will fallback to system sans-serif. -->
		%sveltekit.head%
    <script>
      // Global error & rejection handlers (scoped, minimal overhead)
      (function(){
        const fallback = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="160" height="120"%3E%3Crect width="160" height="120" fill="%23f3f4f6"/%3E%3C/svg%3E';
        window.addEventListener('error', function(e){
          var t = e.target;
          if (t && t.tagName === 'IMG') {
            // prevent noisy console default
            e.stopPropagation();
            // @ts-ignore - dataset available on HTMLImageElement
            if (!t.dataset.fallbackApplied) {
              // @ts-ignore
              t.dataset.fallbackApplied = 'true';
              // @ts-ignore
              const orig = t.src;
              // @ts-ignore
              t.dataset.original = orig;
              // @ts-ignore
              t.src = fallback;
              // @ts-ignore
              if (!t.alt) t.alt = 'Image unavailable';
              console.warn('Image load failure (global handler):', orig);
            }
          }
        }, true);
        window.addEventListener('unhandledrejection', (ev) => {
          console.error('Unhandled promise rejection', ev.reason);
        });
      })();
    </script>
	</head>
	<body data-sveltekit-preload-data="hover">
		<div id="app">%sveltekit.body%</div>
	</body>
</html>
